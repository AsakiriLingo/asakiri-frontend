import Avatar from 'boring-avatars';
import React from 'react';
import { Link } from 'react-aria-components';

import { Course } from '@/types/course.types.ts';

import './card.scss';

interface CardProps<T extends object>
  extends Omit<Course, 'id' | 'description' | 'chapters' | 'isPublished'> {
  link: string;
  children?: React.ReactNode | ((item: T) => React.ReactNode);
}

export const Card = <T extends object>({
  title,
  link,
  shortDescription,
  author,
  courseLanguage,
  languageTaught,
  thumbnail,
}: CardProps<T>) => {
  const randomNum: number = +(Math.random() + 4).toFixed(2);
  const card = (
    <div className="card">
      <img src={thumbnail} alt={title} className="card--thumbnail"></img>
      <div className="card--header">
        {author.avatar ? (
          <img
            className="card--avatar"
            src={author.avatar}
            alt={`${author.name}`}
          />
        ) : (
          <Avatar
            size={42}
            name={author.name}
            colors={['#264653', '#2a9d8f', '#e9c46a', '#f4a261', '#e76f51']}
          />
        )}
        <div className="card--teacher-details">
          <h2 className="card--teacher-name">{author.name}</h2>
          <p className="card--teacher-subtitle">{author.subTitle}</p>
        </div>
      </div>
      <div className="card--content">
        <h2 className="card--content--course-title">{title}</h2>
        <div className="card--content--course-description">
          {shortDescription}
        </div>
        <div className="card--content--language">
          <p className="card--content--language-taught">{languageTaught}</p>
          <p className="card--content--from-text">From</p>
          <p className="card--content--from-language">{courseLanguage}</p>
        </div>
      </div>
      <div className="card--footer">
        <div className="card--footer--left">
          <div className="card--course-rating">
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M11.5352 1.3573C10.6068 0.732464 9.39245 0.732463 8.46411 1.3573C8.10078 1.60184 7.83289 1.97573 7.5887 2.38801C7.3426 2.80351 7.06601 3.3567 6.72172 4.0453L6.70829 4.07215L6.66866 4.15142C6.47374 4.54125 6.41815 4.64522 6.35556 4.72675C6.19845 4.93142 5.98185 5.08245 5.73549 5.15912C5.63734 5.18967 5.52057 5.20589 5.08739 5.25402L5.06263 5.25677C4.38155 5.33244 3.83713 5.39293 3.41697 5.46461C3.00381 5.5351 2.61254 5.63037 2.29349 5.82523C1.14482 6.52682 0.672762 7.95674 1.17797 9.20431C1.3183 9.55082 1.57594 9.86032 1.86594 10.1629C2.16084 10.4707 2.56223 10.8434 3.06439 11.3097L3.06442 11.3097L3.08266 11.3266L3.20007 11.4357C3.54064 11.7519 3.63106 11.8407 3.69338 11.9273C3.88112 12.1883 3.96109 12.5116 3.91666 12.83C3.90191 12.9357 3.86331 13.0564 3.70944 13.495L3.70205 13.516L3.70203 13.5161C3.47598 14.1603 3.29655 14.6717 3.17851 15.0726C3.06378 15.4623 2.9762 15.8426 3.00044 16.1927C3.10444 17.695 4.39733 18.8342 5.90074 18.7483C6.25111 18.7283 6.61735 18.5935 6.98949 18.4307C7.37242 18.2631 7.85717 18.0207 8.46789 17.7154L8.48779 17.7054L9.02516 17.4367C9.46089 17.2189 9.57995 17.1639 9.69245 17.1354C9.89405 17.0843 10.1052 17.0843 10.3068 17.1354C10.4193 17.1639 10.5384 17.2189 10.9741 17.4367L11.5115 17.7054L11.5315 17.7154C12.1422 18.0208 12.6269 18.2631 13.0098 18.4307C13.3819 18.5935 13.7481 18.7283 14.0985 18.7483C15.6019 18.8342 16.8948 17.695 16.9988 16.1927C17.023 15.8426 16.9355 15.4623 16.8207 15.0726C16.7027 14.6716 16.5232 14.1602 16.2971 13.5159L16.2971 13.5158L16.2898 13.495C16.1359 13.0564 16.0973 12.9357 16.0826 12.83C16.0382 12.5116 16.1181 12.1883 16.3059 11.9273C16.3682 11.8407 16.4586 11.7519 16.7992 11.4357L16.9166 11.3266L16.9349 11.3096C17.4371 10.8434 17.8384 10.4707 18.1333 10.1629C18.4233 9.86032 18.681 9.55082 18.8213 9.20431C19.3265 7.95674 18.8544 6.52682 17.7058 5.82523C17.3867 5.63037 16.9954 5.5351 16.5823 5.46461C16.1621 5.39293 15.6177 5.33244 14.9366 5.25677L14.9119 5.25402C14.4787 5.20589 14.3619 5.18967 14.2638 5.15912C14.0174 5.08245 13.8008 4.93142 13.6437 4.72675C13.5811 4.64522 13.5255 4.54125 13.3306 4.15142L13.291 4.07216L13.2775 4.04529L13.2775 4.04523C12.9332 3.35666 12.6566 2.8035 12.4106 2.38801C12.1664 1.97573 11.8985 1.60184 11.5352 1.3573Z"
                fill="#F7C40F"
              />
            </svg>
            <div className="card--course-rating-number">{randomNum}</div>
          </div>
          <div className="card--course-cost">
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8.21368 2.09766H8.24668H11.5616H11.5946C12.6868 2.09765 13.5523 2.09765 14.2499 2.15464C14.9633 2.21293 15.5669 2.33454 16.1181 2.61538C17.0119 3.07077 17.7385 3.79743 18.1939 4.6912C18.4748 5.24238 18.5964 5.846 18.6547 6.55939C18.7117 7.25701 18.7116 8.1225 18.7116 9.21464V9.24766V10.9511V10.9841C18.7116 12.0763 18.7117 12.9418 18.6547 13.6394C18.5964 14.3528 18.4748 14.9564 18.1939 15.5076C17.7385 16.4013 17.0119 17.128 16.1181 17.5834C15.5669 17.8642 14.9633 17.9858 14.2499 18.0441C13.5523 18.1011 12.6868 18.1011 11.5947 18.1011H11.5947H11.5616H8.24668H8.21366H8.21359C7.12149 18.1011 6.25602 18.1011 5.55841 18.0441C4.84502 17.9858 4.2414 17.8642 3.69023 17.5834C2.79646 17.128 2.0698 16.4013 1.6144 15.5076C1.33356 14.9564 1.21195 14.3528 1.15367 13.6394C1.09667 12.9418 1.09667 12.0763 1.09668 10.9841V10.9511V9.24765V9.21465V9.21464C1.09667 8.1225 1.09667 7.25701 1.15367 6.55939C1.1678 6.38643 1.18565 6.21991 1.2086 6.05904C1.17942 5.97895 1.1635 5.89249 1.1635 5.80231C1.1635 5.59758 1.24554 5.41201 1.37852 5.27667C1.44112 5.07387 1.51847 4.87948 1.6144 4.6912C2.0698 3.79743 2.79646 3.07077 3.69023 2.61538C4.2414 2.33454 4.84502 2.21293 5.55841 2.15464C6.25603 2.09765 7.12153 2.09765 8.21367 2.09766H8.21368ZM2.64869 6.68154C2.6523 6.63728 2.65615 6.59422 2.66024 6.55231H14.6712C15.0854 6.55231 15.4212 6.21652 15.4212 5.80231C15.4212 5.3881 15.0854 5.05231 14.6712 5.05231H3.13758C3.44591 4.58704 3.87018 4.20717 4.37121 3.95189C4.67568 3.79675 5.05993 3.70037 5.68056 3.64966C6.30995 3.59824 7.1142 3.59766 8.24668 3.59766H11.5616C12.6941 3.59766 13.4984 3.59824 14.1278 3.64966C14.7484 3.70037 15.1326 3.79675 15.4371 3.95189C16.0486 4.26347 16.5458 4.76066 16.8574 5.37219C17.0125 5.67666 17.1089 6.06091 17.1596 6.68154C17.2111 7.31092 17.2116 8.11518 17.2116 9.24766V10.9511C17.2116 12.0836 17.2111 12.8879 17.1596 13.5172C17.1089 14.1379 17.0125 14.5221 16.8574 14.8266C16.5458 15.4381 16.0486 15.9353 15.4371 16.2469C15.1326 16.402 14.7484 16.4984 14.1278 16.5491C13.4984 16.6005 12.6941 16.6011 11.5616 16.6011H8.24668C7.1142 16.6011 6.30994 16.6005 5.68056 16.5491C5.05993 16.4984 4.67568 16.402 4.37121 16.2469C3.75968 15.9353 3.2625 15.4381 2.95091 14.8266C2.79577 14.5221 2.69939 14.1379 2.64869 13.5172C2.59726 12.8879 2.59668 12.0836 2.59668 10.9511V9.24765C2.59668 8.11517 2.59726 7.31092 2.64869 6.68154ZM4.2642 7.73797C3.84999 7.73797 3.5142 8.07376 3.5142 8.48797C3.5142 8.90219 3.84999 9.23797 4.2642 9.23797H6.95003C7.36424 9.23797 7.70003 8.90219 7.70003 8.48797C7.70003 8.07376 7.36424 7.73797 6.95003 7.73797H4.2642Z"
                fill="#0EC02B"
              />
            </svg>
            <div className="card--course-cost--number">Free</div>
          </div>
        </div>
        {/*<div className="card--footer--right">Learn More</div>*/}
      </div>
    </div>
  );

  return link ? <Link href={link}>{card}</Link> : card;
};
